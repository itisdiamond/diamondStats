% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/function_diamond.R
\name{lm_summary}
\alias{lm_summary}
\title{Extended regression diagnostics}
\usage{
lm_summary(
  input,
  data = NULL,
  best_res = NULL,
  worst_res = NULL,
  plot = FALSE,
  order = c("desc", "asc")
)

lm_summary(
  input,
  data = NULL,
  best_res = NULL,
  worst_res = NULL,
  plot = FALSE,
  order = c("desc", "asc")
)
}
\arguments{
\item{input}{A formula (e.g. \code{y ~ x}) or an object of class \code{lm}.}

\item{data}{Optional data frame if a formula is supplied.}

\item{best_res}{Integer. Number of observations with smallest residuals to include.}

\item{worst_res}{Integer. Number of observations with largest residuals to include.}

\item{plot}{Logical. If \code{TRUE}, plots the residuals with color-coded influence.}

\item{order}{Sorting order of residuals: \code{"desc"} (default) or \code{"asc"}.}
}
\value{
Data frame with regression diagnostics

A data frame with the following columns:
\describe{
\item{y}{Observed values of the dependent variable.}
\item{x}{Values of the independent variable.}
\item{fitted}{Fitted values from the model.}
\item{residuals}{Raw residuals.}
\item{resid_z}{Standardized residuals.}
\item{hat_value}{Leverage (hat) values.}
\item{cook_d}{Cook's distance.}
\item{critical}{Logical flag for influential observations (based on residuals, leverage, or Cook's D).}
}
}
\description{
Provides a summary of a linear model including fitted values, residuals, standardized residuals,
leverage (hat values), and Cook's distance. Identifies influential and extreme residuals, with
optional plotting and filtering of most/least extreme points.
}
\details{
Observations with \code{|standardized residual| > 2}, high leverage
(\code{hat > 2 * mean(hat)}), or high Cook's distance (\code{> 4/n}) are marked as \code{critical}.

If \code{plot = TRUE}, a scatterplot is shown with:
\itemize{
\item Red points: worst residuals
\item Blue points: best residuals
\item Asterisk on label: critical observation
}
}
\examples{
model <- lm(mpg ~ hp, data = mtcars)
lm_summary(model, worst_res = 3, plot = TRUE)

}
